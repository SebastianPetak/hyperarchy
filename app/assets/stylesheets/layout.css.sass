$darkened-background-z-index: 100
$padding-x: $line-height
$header-height: 2 * $line-height
$subheader-height: $line-height * 1.5
$min-width: 1200px
$max-width: 1443px

body
  @include background-image(linear-gradient(top, #aaa, #999))

#header
  height: $header-height
  @include background-image(linear-gradient(top, #4f4f4f, #363636))
  margin: 0 auto
  @include box-sizing('border-box')
  min-width: $min-width
  max-width: $max-width
  padding: 0 (2 * $padding-x)
  color: transparentize(white, 0.15)

  > h1
    font-weight: $regular
    float: left
    letter-spacing: $s-9
    padding: ($line-height/2) 0

  > #menu-items
    float: right
    margin-right: -$line-height
    height: $header-height
    position: relative

    #organizations-menu
      display: inline-block
      #add-organization-link
        display: inline-block
        padding: ceil($line-height/2) $line-height ($line-height/2) $line-height
      .dropdown-menu ul
        left: 0
        right: 0

    #account-menu
      display: inline-block
      #login-link
        padding: ceil($line-height/2) $line-height ($line-height/2) $line-height
      .avatar
        background-image: url(/images/mystery_man_27.jpeg)
        position: absolute
        top: (27 - $line-height)/2 + 1
      #name
        margin-left: 27 + $line-height/2
      .dropdown-menu ul
        text-align: right
        right: 0

.dropdown-menu
  padding: $line-height/2 $line-height
  @include unselectable
  &.active
    background: transparentize(white, 0.9)
  ul
    display: none
    position: absolute
    top: $header-height
    z-index: 2
    right: 0
    background: white
    color: black
    @include box-shadow(transparentize(black, 0.5) 0 0 3px)
    li, #add-organization-menu-item
      display: block
      padding: $line-height/2 $line-height
      &:hover
        background: $highlight-yellow
    #add-organization-menu-item
      border-top: 1px solid #eee
      background: #f8f8f8


#body-wrapper
  margin: 0 auto
  height: 100%
  background: white
  position: relative
  min-width: $min-width
  max-width: $max-width
  @include box-shadow(#666 0 0 5px)
  > #body
    position: absolute
    top: $header-height
    bottom: 0
    width: 100%
    position: absolute
    @include box-sizing('border-box')

#darkened-background
  visibility: hidden
  position: fixed
  width: 100%
  height: 100%
  top: 0
  opacity: 0
  background: black
  z-index: $darkened-background-z-index
  @include transition('opacity', 150ms, 'ease-in')
  &.visible
    visibility: visible
    opacity: 0.3

.lightbox
  z-index: $darkened-background-z-index + 1
  position: fixed
  left: 50%
  top: 50%
  margin-left: -($s13/2)
  width: $s13
  display: none
  background: white
  @include box-shadow(transparentize(black, 0.5) 0 0 5px)
  padding: $s1
  font-size: $s1
  line-height: $s1

  .close
    font-weight: $semibold
    float: right
    font-size: $s3
    color: #888
    margin-left: $s0
    margin-bottom: $s1
    margin-right: 2
    margin-top: 0
    &:hover
      color: #333

  h1
    font-weight: $semibold
    margin-bottom: $s1

  .errors
    background: $pale-red
    margin-top: 3/2 * $s1
    margin-bottom: $s1 * 3/2
    font-size: $s0
    padding: $s1/2

  label
    font-size: $s0
    margin-bottom: 0
    display: block
  input:not([type="submit"])
    height: $s1 * 2
    line-height: $s1
    font-size: $s1
    padding: $s1 / 2 - 2
    display: block
    width: 100%
    margin: 0
    margin-bottom: $s1

  .button
    float: right
    font-size: $s1
    line-height: $s1
    padding: ($s1/2 - 1) $s1
    margin-top: 0

#login-form
  margin-top: -8 * $s1
  .signup-message
    font-size: $s-1

#signup-form
  margin-top: -12 * $s1
  .login-message
    font-size: $s-1
  &.add-organization
    height: $s1 * 24
    margin-top: -14 * $s1

#disconnect-dialog
  height: 8 * $s1
  margin-top: -5 * $s1
  > div
    font-size: $s0
    margin-bottom: $s1